# 第二十二章 安全左移

[目录](../SUMMARY.md) · [术语表](glossary.md) · [时间线](timeline.md)

一次例行的渗透测试指出了一个低级的 XSS 风险。不是事故，却像一记耳光。所有人都知道这类问题“简单”，也正因简单，最容易被忽视。

“安全左移。”陈砺在周会上只说了四个字，然后把SAST、DAST、依赖审计、CSP 一股脑抬进了流水线。CI 面板上多出三列新的检查：

- SAST：合并前静态扫描，不达标直接阻断；
- 依赖审计：锁定高危版本并提供替代建议；
- CSP：默认最小权限，逐步加白名单；
- DAST：预发布环境跑动态扫描；
- Threat Modeling：每个新项目 Kickoff 必填一页模型卡。

有人担心节奏会慢下来。陈砺把“安全的默认值”写进模板：

- 新项目脚手架默认开启 CSP 与 Strict-Transport-Security；
- 默认关闭 `dangerouslySetInnerHTML` 的快捷函数；
- 预置 `sanitize` 工具并在 lint 规则里强制；
- 在组件库中标记“可注入 HTML”的高风险 API。

一个下午，他们拉了一次“威胁建模工作坊”。墙上贴着四个维度：入口、信任边界、资产、对手。每个人拿着便签在图上贴可能的风险点。到最后，白板像被一场小雪覆盖。

夜深时，他把浏览器的书签整理了一遍，删掉了很多过期的链接。安全，有时就是把“方便”往后挪一步，让未来更轻松。
