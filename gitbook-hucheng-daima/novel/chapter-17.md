# 第十七章 大促彩排

全链路彩排自卯时发令，八路负责人同坐一室。空调风直吹，纸杯里咖啡冷得很快。墙上贴着一行字：演练不是演戏。

“依剧本行。”陈砺道。注流、触故、观指、施降、验复，五步不失。

至午，众皆倦。便利贴边缘微翘，笔迹被手心蹭出一点晕。有人笑：“比真事故还累。”

“把恐慌留在今日，把从容留到明日。”

夜里，陆家嘴灯海起伏。他揉目，忆及初次上线时手心的汗，心下却知：系统已学会在不确定中呼吸。

彩排的最后一条剧本，是“演练失败”。他们故意制造一次无法在规定时间内恢复的事故，让所有人练习宣布失败、执行对外沟通与善后流程。

“承认失败，不代表松懈。”陈砺看着时间轴，“它代表我们尊重边界。”

演练结束时，每个人都在卡片上写下“下一次会做得更好的一个点”。有人写“更早提出异议”，有人写“检查清单前先喝水”。他笑，给自己写下：别忘了吃一块巧克力。

# 第十七章 大促彩排

全链路彩排自卯时发令。八路负责人同坐一室，空调风直吹，纸杯里的咖啡很快凉。墙上贴着一行字：演练不是演戏。

“依剧本行。”陈砺道。注流、触故、观指、施降、验复，五步不失。播报员站在白板旁，只做三件事：报当前状态、报异常征兆、报回退决策。每当有人报“征兆”，房间里的注意力就轻轻拉紧，像风吹动的绷带。

第一轮注入“缓存击穿”。站在 API 组的播报员喊：“QPS 抬头，命中率降到 72%。”前端播报员应：“页面热点模块降级，改为静态数据。”Ops 播报员接：“回源链路稳定，回退按钮就绪。”三十秒后，面板上的锯齿落下去，像一口气吐了出来。

第二轮触发“第三方脚本加载缓慢”。读屏器在角落里念了一句“正在准备”，光标停在一个很小的“等待”上。小齐咬了一下嘴唇，忍住了手的冲动——他想马上改，但陈砺按住他的肩：“先回退。”页面在三十秒内恢复到平稳，再进入修复。修复不过一分钟，播报员把“征兆”改成了“已恢复”。

第三轮，是“数据库主从切换”的预演。后端的播报员声音很低，却很稳：“切换开始，读延迟增加 120ms。”前端播报员立刻响应：“对‘非关键路径’的查询加延迟提示。”整个房间像一个被细细调校过的合唱团，每一个声音都知道自己的时刻与音量。

彩排到午后，大家都有些累。桌角的便利贴边缘微翘，笔迹被手心蹭出一点晕。有人笑：“比真事故还累。”陈砺说：“把恐慌留在今天。”

傍晚，他们关掉大灯，只留几盏台灯。第二轮彩排改为“黑场模式”。黑场里，灯只照亮桌面的半径，每一次“征兆”都像黑夜里的一颗小光点。小齐在“黑场模式”里当了一次播报员。他一开始声音不稳，但很快找到了自己的节拍：“状态：稳定；征兆：无；回退：就位。”他念完以后，脸上露出一个小小的笑。

第二日午后，他们做了“预演事故”的复盘。复盘没有赞美，只有三类句子：

1. 事实：时间线、影响面、观测；
2. 决策：谁拍板、何时回退、谁告示；
3. 教训：更早该做什么。

有人问：“为什么不把更多‘经验’写进去？”陈砺说：“经验常常会变，事实比较忠诚。我们先写事实。”

一周后，“大促彩排”进入“剧本阶段”。每一个故障都有“台词”：

“缓存命中率下降到 70% 以下时，播报员先报‘征兆’，再报‘回退决策’。”

“第三方脚本在 2 秒内未加载成功，播报员报‘征兆’，前端报‘降级提示’。”

“数据库切换超过 60 秒未恢复，播报员报‘事故’，由总指挥宣布‘回退’。”

台词让“慌张”变成了“动作”，也让“动作”变成了“合唱”。陈砺说：“我们是合唱团，不是独唱者。”

紧接着，他们做了“冷启动演练”。灰色的清晨，风从窗缝里进来，吹动了白板上的纸条。演练从零开始：没有预热、没有缓存、没有暖机。第一轮，页面的首屏像一只懒猫，慢吞吞地睁开眼睛。第二轮，合成监控提前拉起，首屏时间稳定在 1.2 秒以内。第三轮，播报员开始在每一次首屏之后念一句“用户语言”：“多数人会在 1.2 秒内看到我们。”

演练结束时，大家都靠在椅背上，房间里一片沉默。陈砺站起来，环视一圈，说：“谢谢。我们不是在排演事故，我们是在排演从容。”

那天夜里，他把“演练与剧本”的方法写成一页方法文：

1. 让每一个“征兆”先被念出来；
2. 让每一次“回退”被当作“发布”的一部分；
3. 让每一次“复盘”写下“更早该做什么”。

他写完以后，把笔放在白纸上，停了一分钟。窗外的风很轻，他听见自己的心跳，也听见这座城市在一层一层地载入灯光。

一周后，他们把“剧本”贴在了墙上。贴纸下面写了一句很短的话：

“练，是为了在很长的路上不慌张。”

第二轮“大促彩排”引入了“跨城并发”。另一座城市的团队与他们同时注流、同时播报、同时回退。两地之间通过一块“对照板”保持节拍一致：

- 上海播报“征兆”，广州播报“核实”；
- 上海宣布“回退”，广州宣布“同步”；
- 上海“复盘写事实”，广州“复盘写教训”。

对照板让“合唱”的感觉越发明显。最后一轮落幕时，两地播报员各念了一句“用户语言”的话：“多数人会在 1.2 秒内看到我们。”——合在一起，像一声不高却很稳的合唱。

他们把这次“跨城并发”的复盘贴在了“方法论”的下方。复盘的第一行是：“合唱不是音量的叠加，而是节拍的对齐。”

夜里回家，陈砺在机舱里写下了一段很短的“给播报员的话”：

“你念的不是字，是心。你念得稳，大家就稳。”

第三周，他们让一位实习生担任“影子总指挥”。真正的总指挥站在她身后，像老船长在新船长背后。演练开始时，实习生的手微微发抖，第一句播报有点颤：“状态：稳。”短短两个字，房间里的人都笑了。笑不是嘲弄，是一种传递的力量。到第三个剧本，她的声音已经稳了下来。结束后，她在复盘卡片上写：“我念的不是字，是大家的心。”

第四周，陈砺把“播报员训练大纲”写成了十条短句，贴在“演练与剧本”的边上：

1. 先念事实，再念决策；
2. 不猜想，不渲染；
3. 少形容，多动词；
4. 把‘用户语言’放在第一句；
5. 把‘回退按钮’放在第一行；
6. 复盘里先写‘更早该做什么’；
7. 不追究个人，追述过程；
8. 用‘合唱’替代‘独唱’；
9. 台词写在纸上，贴在墙上；
10. 练到不用看纸。

月末，合成监控的曲线被贴到了休息区。有人停下来端着纸杯看了一会儿，说：“好像一条河。”陈砺答：“是啊，河的两岸是‘演练’和‘方法’，我们在其间过河，很多次。”
