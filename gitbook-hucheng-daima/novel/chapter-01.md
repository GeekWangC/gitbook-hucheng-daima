# 第一章 热更新的清晨

清晨六点半，张江的天刚被一层薄云托起。办公楼的灯还亮着几盏，自动售卖机的屏幕像值守的眼睛，在空荡的走廊里不紧不慢地闪烁。陈砺拎着一杯热豆浆，刷卡进门，指尖被纸杯的温度烫了一下——他喜欢这种确定的温度。

今天要做的第一件事，写在他便签的第一行：把“热更新”的链路从旧工具彻底迁到 Vite。第二行写着：把最重要的东西放在第一行第一列。

团队合并后的第一个月，所有人都像在换乘站赶着下一班车。方法需要重排，路标要重立，关系要重新发音。有的人习惯快，有的人擅长稳；把“快”放进“稳”，需要的是秩序，而不是口号。

七点半，核心同学陆续到齐。白板上写着今天的三件大事：

1. 迁移计划（目标—边界—验收—回退）；
2. 发布闸门（SAST/依赖审计/值守/广播员）；
3. 三句事实（事实—期待—差异）。

“先从最小步开始。”江牧拿起记号笔，“把热更新路径画清楚：入口—解析—编译—替换—状态保留。”

“状态丢失是我们的老问题。”小齐说，“我做了一个实验，把几个典型页面的状态放进了可观测链路里，热替换时验证它是否如预期保留。”

“很好。”

九点，第一轮迁移开始。屏幕上滚动着熟悉的输出，Vite 的日志像一条干净的河。陈砺把“超时阈值”写在纸上，旁边画了一个小方块，代表“回退开关”。

十点二十，一串异常闪过：“样式链路在 Android 中端机型上出现短时跳变”。广播员在群里发出第一条消息：

“我们看见 Android 中端机在 10:20–10:22 的样式 P95=1.1s，正在切回保守路径；预计 10 分钟恢复；如有影响请跟帖。”

十分钟后，曲线回落。

“第一件事，写在 ADR 里。”江牧说，“标题、背景、权衡、决定、复议时间，别落下。”

午后，合并的另一个团队加入了站会。新同学问：“为什么你们总是要多一步‘写下来’？”

“为了把快放在秩序里。”陈砺回答，“当我们累的时候，秩序替我们记住该怎么走。”

傍晚七点，迁移收尾。自诊断页挂在灰度环境。状态页显示“绿”。没有人鼓掌，大家只是在白板上把最后一个方框勾上。白板右下角写着一句话：

“第一行第一列。”

夜里，他把那张便签折好，塞进笔记本的封皮夹层。出门时，走廊尽头还亮着一盏灯，灯光落在地上，像一条细细的路径。

他知道，明天的快，会更稳一点。