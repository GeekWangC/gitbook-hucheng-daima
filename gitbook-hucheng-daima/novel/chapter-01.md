# 第一章 热更新的清晨

清晨六点有余，张江的风自人行栅栏缝里潜来，凉如刀背。陈砺合上电脑，背起旧包，顺手熄了案头孤灯。屏幕上尚停着昨夜的代码评审，标题一句“migrate to Vite”，像江湖旧谱换了新调。

三十五岁，前端第十二年。他对“迁移”的苦与辣并不陌生：包之更替，链路之重编，边界之难测，旧人之不在。走廊尽头，电梯灯亮，仿佛新起的 dev server，风声微动，似初醒的风扇。

地铁二号线往广兰路，窗外高架像被拆分的时间片，一段段退远。车厢里，衬衫与卫衣各自沉默，像两派门人同堂而不扰。经世纪大道换乘，站厅的风夹着咖啡与烤面包气，醒人且暖。

公司楼前一条人工河静卧。前台花瓶插白桔梗，水新而清。九点一刻，周会如时。屏幕上“增长、闭环、合规”诸字次第而出，字字如锚，坠胸微沉。

会后，小齐追上来，眼里尚有青涩：“砺哥，Vite 切完，老活动页还能跑不？”

陈砺微笑，于白板画两线，一旧一新，线间画一方框，记曰“适配”。“先保可运行，再求可统一。热更新是给代码的，稳定是给人的。”

午后，阳光穿过百叶，落在键盘上如行行注释。他翻开五年前的旧仓，变量名如急促脚步，注释似深夜喘息；看一处奇怪的 hack，忽觉像封存多年的短信：彼时你也全力以赴。

“下午两点，二号会议室。”HR 留言平平。行至门口，窗外起一阵极细的雨，如 CSS 的淡入。变更在前，心下却安：早知其意，不过重写几处入口。

黄昏过陆家嘴，楼影切空成片，灯火次第点亮，若路由被一一激活。街角店铺门敞，葱油香气裹着人声，宛如轻弹窗，不扰而在。陈砺想起初到沪上的那年，愚园路旧屋无空调，梧桐鸣蝉，夜里伏案学框架，简历上把“熟悉”写成“精通”，心里有数，却也不惧。

他发讯给小齐：“我写一份兼容方案的 RFC，你先拉最轻的 demo 仓，不用模板。”

屏幕暗下，倒映出他的脸。三十五不算老，只需承认速度不复当年。热更新非万灵，状态复杂到极处，或须一记刷新；而人生不能重启，唯有将变化拆小，一次处理一处 diff。

夜里，远处高架车流如服务器心跳，稳而长。陈砺开新文档，题曰：沪城代码·计划。列三事：

1. 迁移构建链路，保留旧页可运行；
2. 开放组件子集，统一风格与文档；
3. 找回写代码的欢喜。

末了又添一行：与人好好说话。

白光铺纸如雪。他忽悟：“工程化”并非为快，而是在人世无常里搭一条可预期之路。风过梧桐，如无形事件流。他抬手，落字如雨。

深夜，楼下便利店的自动门一合一启，发出轻响，像远处服务器的健康探针。陈砺给自己泡了杯速溶，苦味先到，随后是一点迟来的甘。桌面上摊着两张便签。一张写：把老活动页的依赖树画清楚。另一张写：问问自己，为什么还在写代码。

第二张便签让他停了一会儿。他想到当年在出租屋里敲下的第一行 React，用最笨拙的方式实现最简单的计数器，却乐在其中——因为那是属于自己的“从无到有”。如今，他更在意“让别人也能快起来”。这两件事并不矛盾：前者是手艺，后者是秩序。

他打开日历，把本周的空档用浅灰色标出来，给“兼容方案 RFC”预留三段专注时段；又把周三晚和周末的半天标成绿色，备注：和苏棠。光标在绿色上闪烁时，他忽然觉得心里一块石头落了地：重要的，得先摆出来。

手机亮起一条消息，是小齐发来的 demo 仓库链接。他点开，看见简洁的目录结构和一段干净的 README：动机、方案、快速开始、注意事项。README 的最后，写着一句话：遇到问题，先看日志，再看彼此。

他笑了笑，给小齐点了个赞，随后又加了一个建议：把“快速回退”的命令写进最前面。小齐很快回复了一个“收到”。

窗外风更深了一些，雨停在了街角的落水口里。城市的声音渐稀，他反而更能听见自己。过了零点，他把文档的第一部分—“问题与背景”—写完，关掉电脑，靠在椅背上，闭目一会儿。脑海里慢慢浮起第二部分的标题：目标与非目标。目标，是让新引擎与旧页面和平共处；非目标，是一次性清空历史。写清楚这两行，大半的争论就会消失。

他从椅子上起身，走到窗前。对面居民楼有一扇窗还亮着，隐隐能看到有人在房间里踱步，不知是为了一封邮件，还是一桩生活的决定。城市巨大得像一台运行时，每个进程都在各自的线程里忙碌；但在某个时间点上，又会共享同一种寂静。

第二天早上，他提早二十分钟到了公司，用白板笔在会议室里画了一个“兼容桥”的草图：两岸分别是“旧入口”和“新引擎”，桥面上标了四条车道：静态资源、接口调用、状态同步、日志打点。桥下画了水流，写下一行小字：风险沿水而下，不必逆流硬抗。王序进门看见，点了一下头，说：“先过桥再拆桥，这样对。”

上午十点，他们拉上产品与测试做了一次简短的对齐会。陈砺讲得不快，句子短而实。他把“目标与非目标”写在白板左上角，把“时间线与回退”写在右下角。林越问：“如果到周三晚上还没稳住呢？”陈砺答：“演示用旧入口，兼容桥继续打磨。”每个人眼神里的紧张慢慢退了些，像风吹散了一层薄雾。

午间，他独自走到楼下河边，靠在栏杆上吃简餐。风从水面掠过，带起一层小小的纹。一个穿外套的男人在旁边打电话，说起的也是“版本”和“交付”。他忽然想到，所谓“成长”，可能就是从“给自己一个版本号”开始。不是宣告完美，而是向外界给出一个可被预期的节拍：我正在按部就班地变化。

下午，他关掉了一切通知，坐在工位上敲“方案细节”。字一个个蹦出来，像被召回的士兵：接口映射、资源清单、降级开关、观测指标……每写完一段，他都在心里默念一次：这是否对后来的人有用？当他写到“观测指标”时，忍不住加了一句备注：不要只写“P95、P99”，要写“多数用户在几秒内得到反馈”。他知道，真正能让团队变快的，不是“术”的炫耀，而是“义”的清楚。

傍晚，他把文档发出，邮件标题用了很朴素的一句：兼容桥—第一版。他没有用“革命”这样的词，也没有用“全新”。他更相信缓慢而坚实的词。

夜色落下时，他走在回家的路上。风吹过梧桐，叶影摇曳，像屏幕上流动的绿色进度条。他忽然有些感激这座城市的风，因为它吹过来的每一个瞬间，都在提醒他：变更不必惊人，只要可被看见。等他走到家门口，抬起头，发现窗里的一盏灯恰好亮起，他知道，那是有人在等他。

