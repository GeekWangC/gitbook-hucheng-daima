# 第二章 数据岸的影子

平台合并后的首次评审，白板被划成两半：此为性能，彼为历史。林越指着时间线：“下周三给客户演示，组件库先不统一，样式手搓，可以吗？”

“可以。”陈砺在两半之间画了一方小框，“但留出适配层。旧页走旧入口，新引擎产物经由适配过桥。先稳住江面，再换船。”

有人皱眉：“多维护一份，会慢。”

“江湖用刀，不在一时快慢。”陈砺道，“这一步慢，是为了后来都快。”

会后，小齐学着他的笔意，在墙上添了一行：适配非黑魔，文档须明。

夜里回家，苏棠在吧台后磨豆。她抬眼一笑：“今天像是做了一个不讨巧却正当的决定。”

“短期麻烦，长期清爽。”

窗外细雨打梧桐，声轻如絮。陈砺想，江湖有规矩，才容得百家并行；系统有边界，才握得住快与稳。

# 第二章 兼容层的影子

平台合并后的首次评审，白板被划成两半：此为性能，彼为历史。林越指着时间线：“下周三给客户演示，组件库先不统一，样式手搓，可以吗？”

“可以。”陈砺在两半之间画了一方小框，“但留出适配层。旧页走旧入口，新引擎产物经由适配过桥。先稳住江面，再换船。”

有人皱眉：“多维护一份，会慢。”

“江湖用刀，不在一时快慢。”陈砺道，“这一步慢，是为了后来都快。”

会后，小齐学他的笔意，在墙上又添一行：适配非黑魔，文档须明。

那日午后，他们把“桥”的第一块石头落下：梳理入口、声明接口、标注只读、列出兼容清单。清单像一页作战图，红黄绿三色明白易辨。

夜里回家，苏棠在吧台后磨豆。她抬眼一笑：“今天像做了一个不讨巧却正当的决定。”

“短期麻烦，长期清爽。”

窗外细雨打梧桐，声轻如絮。陈砺想，江湖有规矩，才容百家并行；系统有边界，才握得住快与稳。

第二天，他写了开篇 RFC：

- 动机：在不破坏旧页面的前提下引入新引擎；
- 方案：以适配为桥，入口双轨并行；
- 影响：短期两套产物并存，长期统一；
- 验证：影子流量与回归清单并行观察。

文档发布，评论如潮。有人问：“何时收口？”他答：“当旧桥没人走时，就把桥拆了。”

傍晚，风从河面吹来，灯在幕墙上一盏盏亮起。他知道，真正的速度，是在秩序里加速。

第三天清晨，他们在小会议室开了第一次“桥面站会”。墙上贴着四条横幅，分别写着“入口”“产物”“状态”“日志”。小齐负责入口，林越盯状态，测试小组把日志的格式和字段做了对齐。大家各自报障碍，再由陈砺汇总成“阻塞清单”。

会到一半，门被轻轻推开，一个头发花白的后端老同事探头进来，笑着说：“又要造桥？”陈砺起身请他进来，“不只是桥，我们还想在桥下修一条暗渠。”老同事皱眉：“暗渠？”陈砺解释：影子流量就是暗渠，先让水在暗处走一遍，把石头摸清楚，再引到明面上。老同事点头，说：“这个比喻好。”

午后，适配层的第一段代码上线了。它像一个透明的译员，接过旧页面的请求，用新引擎能懂的话复述一遍，再把回答还给旧页面。第一天的运行非常平静，第二天就不那么平静了。第三方埋点供应商的 SDK 与新构建产物发生了微妙的碰撞，内存占用在某些手机上飙升。问题被影子监控第一时间发现，小齐追进去，写了一个兼容补丁。补丁合入时，陈砺在 PR 上评论：这只是临时遮雨棚，不是新房梁。记得在 ADR 里登记。

晚上回家，他把一天的要点写成了三段话发给团队：

1. 桥面很宽，但车道要窄；
2. 暗渠很暗，但每一处都要挂灯；
3. 站会很短，但结论要写下来。

第四天上午，Ops 的同事来找他们，说夜里有一段时间旧页面的错误率抬升，问是不是桥问题。小齐的脸一下白了。陈砺把他挡在身后，带着 Ops 同事去了会议室。他打开监控，指出错误在旧入口的第三方脚本加载阶段，与桥无关。但他没有停在那里，而是顺着问题往下走，提议在桥上加一个“第三方脚本隔离层”，在需要时能替换为本地缓存，减少抖动。Ops 同事看完图，点头说：“这条线，靠谱。”

午后，陈砺去找王序，争取“隔离层”的资源。王序问：“又要加一层？你是否在过度设计？”陈砺答：“我不想加层，我想减震。桥面如果没有弹性，所有震都压在行人身上。”王序沉默片刻，说：“给你两个人，一周时间。写清前置与撤除条件。”

这周的最后一天，他们在走廊尽头的小茶水间开了一个“灰度过桥”的仪式。每个人把手里的便签写好，贴在“旧→新”的箭头上。第一批 5% 的真实流量被引了过去。大家用一种有点庄严的眼神看着屏幕，一条条细小的曲线像风里的草。有人开玩笑说：“像看心电图。”陈砺说：“只要节律稳定，就好。”

周末，团队做了一次没有咖啡、没有加班的“桥下散步”。他们沿着园区的小河走，一直走到一座有些旧的桥边。小齐说，小时候他住在一座桥旁边，桥下总有水流，他最喜欢在夏天把脚伸到水里。林越说，她更喜欢桥上的风。陈砺说，他喜欢桥的影子，因为影子提醒人，桥不只是走过去，还可以在下面歇一歇。

他们在桥边坐了很久，没有谈任何技术细节，只谈了路和人。回来的路上，小齐忽然道：“砺哥，我觉得我们不是在迁移，我们是在教这座城学会一条新的走法。”陈砺看着远处一盏盏灯，说：“走法只是表。不要忘了为什么走。”

周一的晨会上，王序把“桥”写进了季度 OKR，作为平台化转型的里程碑之一。有人问：“这不是只是前端的事吗？”王序摇头：“桥不是前端的，桥是跨越的。”这句话后来被贴在了墙上，成了团队里的一句话头。

项目的第二个月，他们把“桥”的数据跑成了一个看板。看板有两条线：一条是“流量”，一条是“信任”。流量线的单位是百分比，信任线的单位是笑脸。每当某个团队用上了桥，他们就会在看板上贴一张小笑脸。到月末，笑脸多得像一场秋天的收获。有人说，这很幼稚。陈砺说，幼稚的背后，是人与人之间的承认。承认，比数字更难。

某个黄昏，他在办公区的一扇大窗前看风。风把窗外的树吹成一面翻动的旗，树影在地上晃。手机响，是苏棠发来的消息：今晚早些回。楼下书店有新到的咖啡豆，想让你试试。他回：好的。关掉手机时，他忽然意识到，桥的意义也许从来不在于“新与旧”的胜负，而在于让人们可以安全地渡过去，然后，去做更重要的事。
# 第二章 兼容层的影子

平台合并后的首次评审，白板被划成两半：此为性能，彼为历史。林越指着时间线：“下周三给客户演示，组件库先不统一，样式手搓，可以吗？”

“可以。”陈砺在两半之间画了一方小框，“但留出适配层。旧页走旧入口，新引擎产物经由适配过桥。先稳住江面，再换船。”

有人皱眉：“多维护一份，会慢。”

“江湖用刀，不在一时快慢。”陈砺道，“这一步慢，是为了后来都快。”

会后，小齐学他的笔意，在墙上又添一行：适配非黑魔，文档须明。

那日午后，他们把“桥”的第一块石头落下：梳理入口、声明接口、标注只读、列出兼容清单。清单像一页作战图，红黄绿三色明白易辨。

夜里回家，苏棠在吧台后磨豆。她抬眼一笑：“今天像做了一个不讨巧却正当的决定。”

“短期麻烦，长期清爽。”

窗外细雨打梧桐，声轻如絮。陈砺想，江湖有规矩，才容百家并行；系统有边界，才握得住快与稳。

第二天，他写了开篇 RFC：

- 动机：在不破坏旧页面的前提下引入新引擎；
- 方案：以适配为桥，入口双轨并行；
- 影响：短期两套产物并存，长期统一；
- 验证：影子流量与回归清单并行观察。

文档发布，评论如潮。有人问：“何时收口？”他答：“当旧桥没人走时，就把桥拆了。”

傍晚，风从河面吹来，灯在幕墙上一盏盏亮起。他知道，真正的速度，是在秩序里加速。

第三天清晨，他们在小会议室开了第一次“桥面站会”。墙上贴着四条横幅，分别写着“入口”“产物”“状态”“日志”。小齐负责入口，林越盯状态，测试小组把日志的格式和字段做了对齐。大家各自报障碍，再由陈砺汇总成“阻塞清单”。

会到一半，门被轻轻推开，一个头发花白的后端老同事探头进来，笑着说：“又要造桥？”陈砺起身请他进来，“不只是桥，我们还想在桥下修一条暗渠。”老同事皱眉：“暗渠？”陈砺解释：影子流量就是暗渠，先让水在暗处走一遍，把石头摸清楚，再引到明面上。老同事点头，说：“这个比喻好。”

午后，适配层的第一段代码上线了。它像一个透明的译员，接过旧页面的请求，用新引擎能懂的话复述一遍，再把回答还给旧页面。第一天的运行非常平静，第二天就不那么平静了。第三方埋点供应商的 SDK 与新构建产物发生了微妙的碰撞，内存占用在某些手机上飙升。问题被影子监控第一时间发现，小齐追进去，写了一个兼容补丁。补丁合入时，陈砺在 PR 上评论：这只是临时遮雨棚，不是新房梁。记得在 ADR 里登记。

晚上回家，他把一天的要点写成了三段话发给团队：

1. 桥面很宽，但车道要窄；
2. 暗渠很暗，但每一处都要挂灯；
3. 站会很短，但结论要写下来。

第四天上午，Ops 的同事来找他们，说夜里有一段时间旧页面的错误率抬升，问是不是桥问题。小齐的脸一下白了。陈砺把他挡在身后，带着 Ops 同事去了会议室。他打开监控，指出错误在旧入口的第三方脚本加载阶段，与桥无关。但他没有停在那里，而是顺着问题往下走，提议在桥上加一个“第三方脚本隔离层”，在需要时能替换为本地缓存，减少抖动。Ops 同事看完图，点头说：“这条线，靠谱。”

午后，陈砺去找王序，争取“隔离层”的资源。王序问：“又要加一层？你是否在过度设计？”陈砺答：“我不想加层，我想减震。桥面如果没有弹性，所有震都压在行人身上。”王序沉默片刻，说：“给你两个人，一周时间。写清前置与撤除条件。”

这周的最后一天，他们在走廊尽头的小茶水间开了一个“灰度过桥”的仪式。每个人把手里的便签写好，贴在“旧→新”的箭头上。第一批 5% 的真实流量被引了过去。大家用一种有点庄严的眼神看着屏幕，一条条细小的曲线像风里的草。有人开玩笑说：“像看心电图。”陈砺说：“只要节律稳定，就好。”

周末，团队做了一次没有咖啡、没有加班的“桥下散步”。他们沿着园区的小河走，一直走到一座有些旧的桥边。小齐说，小时候他住在一座桥旁边，桥下总有水流，他最喜欢在夏天把脚伸到水里。林越说，她更喜欢桥上的风。陈砺说，他喜欢桥的影子，因为影子提醒人，桥不只是走过去，还可以在下面歇一歇。

他们在桥边坐了很久，没有谈任何技术细节，只谈了路和人。回来的路上，小齐忽然道：“砺哥，我觉得我们不是在迁移，我们是在教这座城学会一条新的走法。”陈砺看着远处一盏盏灯，说：“走法只是表。不要忘了为什么走。”

周一的晨会上，王序把“桥”写进了季度 OKR，作为平台化转型的里程碑之一。有人问：“这不是只是前端的事吗？”王序摇头：“桥不是前端的，桥是跨越的。”这句话后来被贴在了墙上，成了团队里的一句话头。

项目的第二个月，他们把“桥”的数据跑成了一个看板。看板有两条线：一条是“流量”，一条是“信任”。流量线的单位是百分比，信任线的单位是笑脸。每当某个团队用上了桥，他们就会在看板上贴一张小笑脸。到月末，笑脸多得像一场秋天的收获。有人说，这很幼稚。陈砺说，幼稚的背后，是人与人之间的承认。承认，比数字更难。

某个黄昏，他在办公区的一扇大窗前看风。风把窗外的树吹成一面翻动的旗，树影在地上晃。手机响，是苏棠发来的消息：今晚早些回。楼下书店有新到的咖啡豆，想让你试试。他回：好的。关掉手机时，他忽然意识到，桥的意义也许从来不在于“新与旧”的胜负，而在于让人们可以安全地渡过去，然后，去做更重要的事。

周末的最后一个小时，他把“桥”的 Runbook 整理出来，存在了文档站最显眼的位置：如何观测、何时回退、谁来拍板、回退后如何验证、事故如何记录。Runbook 的最后一行是一句很短的话：当你犹豫时，优先选择“让更多人安全”。写完这句，他把电脑合上，往窗外看了一眼，天色已经暗了，风从树梢上掠过，带着水的味道。他给苏棠发消息：我现在回。那一刻，他忽然觉得，桥已经不只是在电脑里，它已经在他们的生活里落地了。
