# 第十八章 异常的指数

面板上的错误率突然出现了一个规律的锯齿形，每隔二十分钟上升一个小尖峰，然后回落。

“像是内存泄漏与 GC 周期叠加。”小齐说。

他们把采样率调高，抓下了 heap 快照。几处闭包里被意外引用的对象没有释放，像城市里被遗忘的角落积起了水。

修复上线后，锯齿变成了一条平滑的线。陈砺在 ADR 里写下原因、影响与替代方案，又在注释里写了一句：不要让焦虑成为代码的闭包。

他把那段闭包的代码片段打印出来，贴在墙上，并在旁边写：当我们把不确定“捕获”进来时，也请给它一个释放的出口。

晚上回到家，他把今天的事情讲给苏棠听。她笑：“你把情绪也当内存管理了。”

“可能吧。”他摊手，“但我在努力写一个不会泄漏的生活。”
