# 第十一章 影子系统

影子环境上线的那一天，办公室异常安静。新的请求在网关被分流，一半去真实生产，一半悄无声息地流向“影子”。

“我们要在不打扰用户的前提下，看见所有错误。”陈砺盯着面板，指针像心跳一样稳。

影子环境的数据库只记录匿名、脱敏后的数据，日志加了统一的 traceId。第一条红色告警出现时，小齐抢先点开：“渲染竞争条件，和老框架的生命周期冲突。”

“在影子里修。”陈砺说，“修到零，再切 5% 正式流量。”

晚上走出大楼时，风从张江的河面吹来。他想起自己来到上海的第一个夜晚，租住在愚园路一间没有空调的老房子里，汗水往下滴，代码也往下滴。如今他学会了用影子系统承接风险，也该学会用某种温柔承接生活的不确定。

第二天一早，他们把影子环境接入了合成监控，用一组“用户旅程”脚本稳定注入流量。面板上开始出现一条条轻微的抖动曲线，像人醒来前眼皮的细颤。

“登录链路有一次偶发 401。”小齐盯着日志，“影子流量里 token 在某个时间点过期，但正式环境会刷新。”

“在影子里补齐刷新逻辑，只做只读操作。”陈砺说，“记得标注只读，别让影子写脏数据。”

午后，王序走过来看了一眼：“影子系统这块，不要只做技术验证。拉一条产品层面的看板，把‘发现的问题’转成‘用户会遇到的问题’。”

“把技术指纹翻译成人话。”陈砺笑了笑，补了一条规则：每个影子告警必须附一句“用户感受描述”。

傍晚，他把当日的几条红线整理成一份小结，发给跨组同事。标题是《影子系统日报 001》。最后一段只有一句话：我们的目标不是零告警，而是零盲区。
