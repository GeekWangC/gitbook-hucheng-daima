# 第十一章 影子系统

影子环境上线的那一天，办公室异常安静。新的请求在网关被分流，一半去真实生产，一半悄无声息地流向“影子”。

“我们要在不打扰用户的前提下，看见所有错误。”陈砺盯着面板，指针像心跳一样稳。

影子环境的数据库只记录匿名、脱敏后的数据，日志加了统一的 traceId。第一条红色告警出现时，小齐抢先点开：“渲染竞争条件，和老框架的生命周期冲突。”

“在影子里修。”陈砺说，“修到零，再切 5% 正式流量。”

晚上走出大楼时，风从张江的河面吹来。他想起自己来到上海的第一个夜晚，租住在愚园路一间没有空调的老房子里，汗水往下滴，代码也往下滴。如今他学会了用影子系统承接风险，也该学会用某种温柔承接生活的不确定。
